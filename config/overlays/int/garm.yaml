apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: webhook-secret-github-actions-org
  namespace: garm-infra-stage-int
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  target:
    name: webhook-secret-github-actions-org
    creationPolicy: Owner
  data:
    - secretKey: webhookSecret
      remoteRef:
        key: garm-int
        property: webhook_secret
---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: garm-cli-password
  namespace: garm-infra-stage-int
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  target:
    name: garm-cli-password
    creationPolicy: Owner
  data:
    - secretKey: cliPassword
      remoteRef:
        key: garm-int
        property: cli_password
---
apiVersion: garm-operator.mercedes-benz.com/v1alpha1
kind: Organization
metadata:
  labels:
    app.kubernetes.io/name: organization
    app.kubernetes.io/instance: organization-int
    app.kubernetes.io/part-of: garm-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: garm-operator
  name: github-actions
  namespace: garm-infra-stage-int
spec:
  webhookSecretRef:
    name: webhook-secret-github-actions-org
    key: webhookSecret
  credentialsName: "pida2af"
---
apiVersion: garm-operator.mercedes-benz.com/v1alpha1
kind: Pool
metadata:
  labels:
    app.kubernetes.io/created-by: garm-operator
    app.kubernetes.io/instance: pool-sample
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: pool
    app.kubernetes.io/part-of: garm-operator
  name: kubernetes-pool-small-org-github-actions
  namespace: garm-infra-stage-int
spec:
  githubScopeRef:
    apiGroup: garm-operator.mercedes-benz.com
    kind: Organization
    name: github-actions
  enabled: false
  extraSpecs: '{\"garm_image_type\":\"runner-default\",\"garm_stage\":\"int\"}'
  flavor: small
  forceDeleteRunners: true
  githubRunnerGroup: ""
  imageName: kubernetes-runner
  maxRunners: 2
  minIdleRunners: 1
  osArch: amd64
  osType: linux
  providerName: kubernetes_external
  runnerBootstrapTimeout: 20
  runnerPrefix: "road-runner-k8s-int"
  tags:
    - k8s-int
    - self-hosted
    - Linux
    - x64
---
apiVersion: garm-operator.mercedes-benz.com/v1alpha1
kind: Pool
metadata:
  labels:
    app.kubernetes.io/created-by: garm-operator
    app.kubernetes.io/instance: pool-sample
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/name: pool
    app.kubernetes.io/part-of: garm-operator
  name: kubernetes-pool-openstack-medium-org-github-actions
  namespace: garm-infra-stage-int
spec:
  githubScopeRef:
    apiGroup: garm-operator.mercedes-benz.com
    kind: Organization
    name: github-actions
  enabled: false
  extraSpecs: '{\"garm_image_type\":\"runner-default\",\"garm_stage\":\"int\"}'
  flavor: m1.medium
  forceDeleteRunners: true
  githubRunnerGroup: ""
  imageName: runner-default
  maxRunners: 2
  minIdleRunners: 1
  osArch: amd64
  osType: linux
  providerName: os00.fra-prod3
  runnerBootstrapTimeout: 20
  runnerPrefix: "road-runner-os-int"
  tags:
    - openstack-int
    - self-hosted
    - Linux
    - x64
---
apiVersion: garm-operator.mercedes-benz.com/v1alpha1
kind: Image
metadata:
  labels:
    app.kubernetes.io/name: image
    app.kubernetes.io/instance: image-sample
    app.kubernetes.io/part-of: garm-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: garm-operator
  name: runner-default
  namespace: garm-infra-stage-int
spec:
  tag: runner-default-20230808-13-31-b2f619f
---
apiVersion: garm-operator.mercedes-benz.com/v1alpha1
kind: Image
metadata:
  labels:
    app.kubernetes.io/name: image
    app.kubernetes.io/instance: image-sample
    app.kubernetes.io/part-of: garm-operator
    app.kubernetes.io/managed-by: kustomize
    app.kubernetes.io/created-by: garm-operator
  name: kubernetes-runner
  namespace: garm-infra-stage-int
spec:
  tag: linux-ubuntu-22.04-amd64
